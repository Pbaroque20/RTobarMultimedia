# Force HTTPS and www on live domain only (skip on localhost / other hosts)
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^(www\.)?tobarmediadesign\.com$ [NC]
    RewriteCond %{HTTPS} off [OR]
    RewriteCond %{HTTP_HOST} !^www\. [NC]
    RewriteRule ^(.*)$ https://www.tobarmediadesign.com/$1 [L,R=301]
</IfModule>

# Cache control: newer content wins when you bump asset version in index.html
# Bump <meta name="asset-version" content="..."> and all ?v= in link/script on deploy.

<IfModule mod_headers.c>
    # HTML: revalidate so browser gets fresh page and new ?v= URLs
    <FilesMatch "\.(html|htm)$">
        Header set Cache-Control "no-cache, must-revalidate"
    </FilesMatch>

    # Versioned assets (CSS, JS): long cache; change ?v= on deploy to invalidate
    <FilesMatch "\.(css|js)$">
        Header set Cache-Control "public, max-age=31536000"
    </FilesMatch>

    # Fonts and images: long cache (update filenames or use ?v= if you change them)
    <FilesMatch "\.(woff|woff2|eot|otf|ttf|svg|png|jpg|jpeg|gif|webp|ico)$">
        Header set Cache-Control "public, max-age=31536000"
    </FilesMatch>

    # JSON data: short cache so updates are seen soon (or use ?v= from meta)
    <FilesMatch "\.(json)$">
        Header set Cache-Control "no-cache, must-revalidate"
    </FilesMatch>
</IfModule>
