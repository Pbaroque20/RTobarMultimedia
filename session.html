<body style="background-color: #1D5F89;">
    <div id="portraitOnlyOverlay" aria-hidden="true"><p>Please rotate your device to portrait mode to view this website.</p></div>
    <div class="wrapper session-page">
        <div id="overlay"></div>
        <div class="imageContainer2">
            <header>
                <div id="topHeader">
                    <div>Tobar<span class="multi">MediaDesign</span></div>
                    <div id="copyright-year">©2026</div>
                </div>
            </header>
            <main>
                <section>
                    <div class="portfolioblocks"></div>
                    <div id="lightbox"><div id="closelightbox">PRESS WINDOW TO CLOSE</div><img id="changeImg" /><div id="inform"></div></div>
                    <div id="videoLightboxWrap">
                        <div id="close">CLOSE WINDOW</div>
                        <iframe id="videobox" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                        <video id="localVideo" controls preload="none">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="birth"><img style="cursor:pointer;" class="workimg" id="birth" src="images/birth.png" /></div>
                    <div class="ances"><img style="cursor:pointer;" class="workimg" id="ances" src="images/ances.png" /></div>
                    <div class="contactus2"><img style="cursor:pointer;" class="workimg" id="contactus2" src="images/contactus2.png" /></div>
                    <div class="min"><img style="cursor:pointer;" class="workimg" id="min" src="images/30min.png" /></div>
                    <div class="contactus2gameplay"><img style="cursor:pointer;" class="workimg" id="contactus2gameplay" src="images/contactus2gameplay.png" /></div>
                    <div class="beaver"><img style="cursor:pointer;" class="workimg" id="beaver" src="images/beaver.png" /></div>
                    <div class="essence"><img style="cursor:pointer;" class="workimg" id="essence" src="images/colli.png" /></div>
                    <div class="experi"><img style="cursor:pointer;" class="workimg" id="experi" src="images/experi.png" /></div>
                    <div class="fish"><img style="cursor:pointer;" class="workimg" id="fish" src="images/bomb.png" /></div>
                    <div class="ford"><img style="cursor:pointer;" class="workimg" id="ford" src="images/FS.png" /></div>
                    <div class="lifeisjazz"><img style="cursor:pointer;" class="workimg" id="lifeisjazz" src="images/lifeisjazz.png" /></div>
                    <div class="m"><img style="cursor:pointer;" class="workimg" id="m" src="images/M.png" /></div>
                    <div class="mirror"><img style="cursor:pointer;" class="workimg" id="mirror" src="images/mirror.png" /></div>
                    <div class="work2020"><img style="cursor:pointer;" class="workimg" id="2020" src="images/2020.png" /></div>
                    <div class="rw"><img style="cursor:pointer;" class="workimg" id="rw" src="images/rw.png" /></div>
                    <div class="eledonkey2020"><img style="cursor:pointer;" class="workimg" id="eledonkey2020" src="images/2020eledonkey.png" /></div>
                    <div class="surgeons"><img style="cursor:pointer;" class="workimg" id="surgeons" src="images/surgeons.png" /></div>
                    <div class="vaniads"><img style="cursor:pointer;" class="workimg" id="vaniads" src="images/vaniads.png" /></div>
                    <div class="logod"><img style="cursor:pointer;" class="workimg" id="logod" src="images/logodesigns.png" /></div>
                    <div class="gelfenstein"><img style="cursor:pointer;" class="workimg" id="gelfenstein" src="images/gelfenstein.png" /></div>
                </section>
            </main>
        </div>
        <nav class="nav_page2">
            <ul>
                <li><a class="genesis">genesis</a></li>
                <li><a style="color: #F3E60F;cursor:default;">session</a></li>
                <li><a class="narrative">narrative</a></li>
                <li><a class="connect">connect</a></li>
            </ul>
        </nav>
        <div id="demoreel"><a id="demoreellink">2013 Motion Graphics Demo Reel</a></div>
    </div>
    <div id="sessionPanHint" aria-live="polite">Pan screen with drag</div>
    <script>
        $(document).ready(function () {
            $('#copyright-year').text('©' + new Date().getFullYear());
            
            // Disable image dragging on workimgs globally
            $('.workimg img').attr('draggable', 'false').on('dragstart', function(e) {
                e.preventDefault();
                return false;
            });

            // Click-drag panning for desktop when window is resized below 960px
            var hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            // Desktop = has mouse capability (not mobile/tablet)
            var isMobileDevice = hasTouch && window.innerWidth <= 768 && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            var isDesktop = !isMobileDevice;
            var isDragging = false;
            var hasDragged = false; // Track if user actually dragged (moved mouse) - accessible globally
            var startX = 0;
            var scrollLeft = 0;
            var dragThreshold = 5; // Pixels to move before considering it a drag
            var $wrapper = null;
            var panStartTarget = null; // Track what element was clicked for pan start
            
            function setupDragPanning() {
                $wrapper = $('.wrapper.session-page');
                var windowWidth = window.innerWidth;
                
                // Remove any existing handlers first
                $wrapper.off('mousedown.pan');
                $(document).off('mousemove.pan mouseup.pan');
                
                // Only enable for desktop when window is small
                if (windowWidth <= 959 && isDesktop && $wrapper.length) {
                    // Make sure wrapper is scrollable
                    var wrapperEl = $wrapper[0];
                    if (wrapperEl.scrollWidth <= wrapperEl.clientWidth) {
                        return;
                    }
                    
                    $wrapper.on('mousedown.pan', function(e) {
                        var $target = $(e.target);
                        var tagName = e.target.tagName.toLowerCase();
                        
                        // Don't start pan if clicking on interactive elements (except workimg - handled separately)
                        if (tagName === 'a' || tagName === 'button' ||
                            $target.closest('#lightbox, #videoLightboxWrap, #overlay, nav, #close, #closelightbox, #demoreel').length) {
                            return true;
                        }
                        
                        // Store the target for later check
                        panStartTarget = e.target;
                        isDragging = false;
                        hasDragged = false;
                        startX = e.pageX;
                        scrollLeft = wrapperEl.scrollLeft;
                        
                        // If clicking on workimg, prevent image drag but allow click if no movement
                        if ($target.closest('.workimg').length) {
                            // Prevent image dragging - stop default drag behavior
                            e.preventDefault();
                            e.stopPropagation();
                            // Disable drag on images immediately
                            $('.workimg img').attr('draggable', 'false');
                            $('.workimg img').off('dragstart.pan').on('dragstart.pan', function(e) {
                                e.preventDefault();
                                e.stopPropagation();
                                return false;
                            });
                            return false; // Prevent default to stop image drag
                        }
                        
                        // For other areas, prepare for drag
                        $wrapper.css({
                            'cursor': 'grabbing',
                            'user-select': 'none'
                        });
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    });
                    
                    $(document).on('mousemove.pan', function(e) {
                        if (panStartTarget === null) return;
                        
                        var deltaX = Math.abs(e.pageX - startX);
                        
                        // If moved more than threshold, it's a drag
                        if (deltaX > dragThreshold) {
                            hasDragged = true;
                            isDragging = true;
                            
                            var $target = $(panStartTarget);
                            var scrollDelta = e.pageX - startX;
                            
                            // Disable selection on workimgs when dragging
                            if ($target.closest('.workimg').length) {
                                $('.workimg').css({
                                    'user-select': 'none',
                                    '-webkit-user-select': 'none',
                                    '-moz-user-select': 'none',
                                    '-ms-user-select': 'none',
                                    'pointer-events': 'none' // Prevent image drag
                                });
                            }
                            
                            // Perform pan (works for both workimg and other areas)
                            wrapperEl.scrollLeft = scrollLeft - (scrollDelta * 2);
                            $wrapper.css({
                                'cursor': 'grabbing',
                                'user-select': 'none'
                            });
                            e.preventDefault();
                            e.stopPropagation();
                            return false;
                        }
                    });
                    
                    $(document).on('mouseup.pan', function(e) {
                        if (panStartTarget !== null) {
                            // Re-enable selection on workimgs
                            $('.workimg').css({
                                'user-select': '',
                                '-webkit-user-select': '',
                                '-moz-user-select': '',
                                '-ms-user-select': '',
                                'pointer-events': ''
                            });
                            
                            // Reset cursor immediately
                            $wrapper.css({
                                'cursor': 'grab',
                                'user-select': ''
                            });
                            
                            // Reset states after a small delay to allow click event to check hasDragged
                            setTimeout(function() {
                                isDragging = false;
                                hasDragged = false;
                                panStartTarget = null;
                            }, 50);
                        }
                    });
                    
                    // Disable image dragging on workimgs
                    $('.workimg img').attr('draggable', 'false').on('dragstart', function(e) {
                        e.preventDefault();
                        return false;
                    });
                    
                    // Show grab cursor on hover - but not on workimg
                    $wrapper.css('cursor', 'grab');
                    $wrapper.find('section, main').css('cursor', 'grab');
                } else {
                    // Disable drag
                    if ($wrapper.length) {
                        $wrapper.css({
                            'cursor': '',
                            'user-select': ''
                        });
                        $wrapper.find('section, main').css('cursor', '');
                    }
                    isDragging = false;
                    hasDragged = false;
                    panStartTarget = null;
                }
            }
            
            // Initialize after a small delay to ensure DOM is ready
            setTimeout(function() {
                setupDragPanning();
            }, 100);
            
            // Update on resize
            $(window).on('resize', function() {
                setTimeout(setupDragPanning, 50);
            });
            
            // Show hint for touch devices only when window is small
            if (window.innerWidth <= 959 && hasTouch && !sessionStorage.getItem('sessionPanHintSeen')) {
                $('#sessionPanHint').addClass('session-pan-hint-visible');
                var panHintTimeout;
                function hidePanHint() {
                    $('#sessionPanHint').removeClass('session-pan-hint-visible');
                    sessionStorage.setItem('sessionPanHintSeen', '1');
                    if (panHintTimeout) clearTimeout(panHintTimeout);
                    $(document).off('touchstart pointerdown', hidePanHint);
                }
                panHintTimeout = setTimeout(hidePanHint, 4000);
                $(document).on('touchstart pointerdown', hidePanHint);
            }

            //Site navigation and animation

            $('.genesis').on('click', function (e) {
                navigateTo('genesis.html', '#F5E10E');
            });

            $('.narrative').on('click', function (e) {
                navigateTo('narrative.html', '#0E1037');
            });

            $('.connect').on('click', function (e) {
                navigateTo('connect.html', '#EA0C94');
            });

            if (window.innerWidth >= 960) {
                $('.nav_page2 ul li').not(':nth-child(2)').find('a').on('mouseenter', function () {
                    $(this).addClass('nav-desktop-hover');
                }).on('mouseleave', function () {
                    $(this).removeClass('nav-desktop-hover');
                });

                // Dynamic scroll stop: do not scroll past the "2013 Motion Graphics Demo Reel" block
                // Increased clamping to prevent lightboxes from overlapping the demo reel
                (function () {
                    var $stop = $('#demoreel');
                    if (!$stop.length) return;
                    var originalMaxScrollY = null;
                    function getMaxScrollY() {
                        var rect = $stop[0].getBoundingClientRect();
                        // Add extra padding (200px) to account for lightbox heights and prevent overlap
                        var extraPadding = 200;
                        var calculatedMax = rect.top + window.scrollY - window.innerHeight + extraPadding;
                        // Store the original max scroll value before any lightbox opens
                        if (originalMaxScrollY === null) {
                            originalMaxScrollY = calculatedMax;
                        }
                        // Always use the original max scroll, don't allow it to increase
                        return originalMaxScrollY;
                    }
                    function clampScroll() {
                        // Don't clamp if lightbox is open - prevent scrolling entirely instead
                        if ($('#lightbox').is(':visible') || $('#videoLightboxWrap').is(':visible')) {
                            return;
                        }
                        var maxY = getMaxScrollY();
                        if (maxY > 0 && window.scrollY > maxY) window.scrollTo(0, maxY);
                    }
                    $(window).on('scroll', clampScroll).on('resize', clampScroll);
                })();
            }
        });
        // portfolio windows and ajax

        var info =
        {
            "information": [
                { "birth": "Birth of the Universe, 2011" },
                { "ances": "Ancestor, 2014" },
                { "contactus2": "Contact Us 2 Trailer" },
                { "min": "30 Minute Interview with Dr. Hasan on WSVN7 (Highlights Reel), 2012" },
                { "contactus2gameplay": "Contact Us 2 - Gameplay Screenshots, 2022 (w/ Dark Igloo, Fuzzy Wobble, & Niles Fromm)" },
                { "beaver": "Beaver Walking Across Water, 2011" },
                { "essence": "Neighborhood I (Hummingbird Colliding Against A Surface), 2019" },
                { "experi": "Typographical Posters, 2002-03" },
                { "fish": "Neighborhood III (Defending Bombardier Beetle), 2021" },
                { "ford": "Ford Infographic of Yearly Revenue (Study), 2014" },
                { "lifeisjazz": "Life is Jazz, 2007 (left) | 2018 (right)" },
                { "gelfenstein": "Gelfenstein Farm Promo, 2014" },
                { "m": "Futura Posters (Study), 2013" },
                { "mirror": "Vanity Cosmetic Surgery - 30 Second Spot on NBC6 and ABC10, 2012" },
                { "2020": "2020: The Ride, 2021" },
                { "rw": "Realty Estate Flyers for Realty World REC, 2013" },
                { "eledonkey2020": "2020: The Ride, 2020 (w/ JenDotLu & Pariah Interactive)" },
                { "surgeons": "Surgeon's Cosmetic Med & Spa, 2012" },
                { "vaniads": "Vanity Cosmetic Surgery Designs, 2012" },
                { "logod": "Logo Designs, 2015" }
            ]
        };

        $('#demoreel').on('click', function () {
            $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
            $('#videobox').css({ 'display': 'block', 'width': '750px', 'height': '421px', 'left': '105px', 'top': '150px' }).attr({ 'src': '//player.vimeo.com/video/88704801?title=0&amp;byline=0&amp;portrait=0', 'width': '750', 'height': 421, 'frameborder': 0 });
            $('#close').css({
                'display': 'block',
                'left': '105px',
                'top': '120px'
            });
            $('#overlay').css('display', 'block');
        });
        $('#close').on('click', function () {
            $('#videoLightboxWrap').css('display', 'none');
            $(this).css('display', 'none');
            $('#videobox').css('display', 'none').attr('src', '');
            var localVideoEl = $('#localVideo').get(0);
            if (localVideoEl) {
                localVideoEl.pause();
                localVideoEl.currentTime = 0;
            }
            // Reset video size to default
            $('#localVideo').css({
                'display': 'none',
                'width': '',
                'height': '',
                'left': '',
                'top': ''
            });
            // Reset close button position to default
            $('#close').css({
                'left': '',
                'top': ''
            });
            // Remove any existing source elements
            $('#localVideo source').remove();
            // Clear video src
            var localVideoEl = $('#localVideo').get(0);
            if (localVideoEl) {
                localVideoEl.src = '';
                localVideoEl.removeAttribute('src');
            }
            $('#overlay').css('display', 'none');
            $('#lightbox').css('display', 'none');
            if (window.innerWidth > 959) $('.wrapper').css('height', '1014px');
            else $('.wrapper').css('height', '');
        });

        $('.workimg').on('click', function (e) {
            // Prevent click if user was dragging (for desktop resized below 960px)
            // Check if we're in drag mode and user actually dragged
            if (window.innerWidth <= 959 && typeof hasDragged !== 'undefined' && hasDragged) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
            switch ($(this).attr('id')) {
                case "birth":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/BirthoftheUniverse_RaphaelTobar_2011.png");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[0].birth);
                    $('#overlay').css('display', 'block');
                    break;
                case "ances":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/ancestor_by_raphaeltobar.png");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[1].ances);
                    $('#overlay').css('display', 'block');
                    break;
                case "contactus2":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css('display', 'none');
                    var videoPath = 'videos/contactUs2_trailer.mp4';
                    var videoElement = $('#localVideo').get(0);
                    // Remove any existing source elements
                    $('#localVideo source').remove();
                    // Create and append new source element
                    var sourceElement = document.createElement('source');
                    sourceElement.src = videoPath;
                    sourceElement.type = 'video/mp4';
                    videoElement.appendChild(sourceElement);
                    videoElement.load();
                    // contactus2: 750px x 422px (16:9), centered
                    var videoLeft = 105;
                    var videoTop = 100;
                    $('#localVideo').css({
                        'display': 'block',
                        'width': '750px',
                        'height': '422px',
                        'left': videoLeft + 'px',
                        'top': videoTop + 'px'
                    });
                    // Position close button above the video
                    $('#close').css({
                        'display': 'block',
                        'left': videoLeft + 'px',
                        'top': (videoTop - 30) + 'px' // 30px above the video
                    });
                    // Try to play the video
                    var playPromise = videoElement.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(function(error) {
                            console.log('Video play failed:', error);
                        });
                    }
                    $('#overlay').css('display', 'block');
                    break;
                case "min":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css({ 'display': 'block', 'width': '750px', 'height': '421px', 'left': '105px', 'top': '150px' }).attr({ 'src': '//player.vimeo.com/video/52028294?title=0&amp;byline=0&amp;portrait=0', 'width': '750', 'height': 421, 'frameborder': 0 });
                    $('#close').css({
                        'display': 'block',
                        'left': '105px',
                        'top': '120px'
                    });
                    $('#overlay').css('display', 'block');
                    break;
                case "contactus2gameplay":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/work/contactusScreens.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[4].contactus2gameplay);
                    $('#overlay').css('display', 'block');
                    break;
                case "beaver":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/beaver_walking_across_water.png");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[5].beaver);
                    $('#overlay').css('display', 'block');
                    break;
                case "essence":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/collision_30x_small.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[6].essence);
                    $('#overlay').css('display', 'block');
                    break;
                case "experi":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/typeposters.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[7].experi);
                    $('#overlay').css('display', 'block');
                    break;
                case "fish":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/raphael-tobar-bombardier-screen-raphaeltobar.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[8].fish);
                    $('#overlay').css('display', 'block');
                    break;
                case "ford":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css('display', 'none');
                    var videoPath = 'videos/fs-demo-vid-02.mp4';
                    var videoElement = $('#localVideo').get(0);
                    $('#localVideo source').remove();
                    var sourceElement = document.createElement('source');
                    sourceElement.src = videoPath;
                    sourceElement.type = 'video/mp4';
                    videoElement.appendChild(sourceElement);
                    videoElement.load();
                    // 25% larger than 625x351: 781x439, centered on 960px
                    var videoLeft = 90;
                    var videoTop = 150;
                    $('#localVideo').css({
                        'display': 'block',
                        'width': '781px',
                        'height': '439px',
                        'left': videoLeft + 'px',
                        'top': videoTop + 'px'
                    });
                    $('#close').css({
                        'display': 'block',
                        'left': videoLeft + 'px',
                        'top': (videoTop - 30) + 'px'
                    });
                    var playPromise = videoElement.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(function(error) {
                            console.log('Video play failed:', error);
                        });
                    }
                    $('#overlay').css('display', 'block');
                    break;
                case "lifeisjazz":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/life_is_jazz_remake.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[10].lifeisjazz);
                    $('#overlay').css('display', 'block');
                    break;
                case "gelfenstein":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css({ 'display': 'block', 'width': '750px', 'height': '421px', 'left': '105px', 'top': '150px' }).attr({ 'src': '//player.vimeo.com/video/88657994?title=0&amp;byline=0&amp;portrait=0', 'width': '750', 'height': 421, 'frameborder': 0 });
                    $('#close').css({
                        'display': 'block',
                        'left': '105px',
                        'top': '120px'
                    });
                    $('#overlay').css('display', 'block');
                    break;
                case "m":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/space.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[12].m);
                    $('#overlay').css('display', 'block');
                    if (window.innerWidth > 959) $('.wrapper').css('height', '1487px');
                    else $('.wrapper').css('height', '');
                    break;
                case "mirror":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css({ 'display': 'block', 'width': '750px', 'height': '421px', 'left': '105px', 'top': '150px' }).attr({ 'src': '//player.vimeo.com/video/56375759?title=0&amp;byline=0&amp;portrait=0', 'width': '750', 'height': 421, 'frameborder': 0 });
                    $('#close').css({
                        'display': 'block',
                        'left': '105px',
                        'top': '120px'
                    });
                    $('#overlay').css('display', 'block');
                    break;
                case "2020":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css('display', 'none');
                    var videoPath = 'videos/2020_trailer.mp4';
                    var videoElement = $('#localVideo').get(0);
                    // Remove any existing source elements
                    $('#localVideo source').remove();
                    // Create and append new source element
                    var sourceElement = document.createElement('source');
                    sourceElement.src = videoPath;
                    sourceElement.type = 'video/mp4';
                    videoElement.appendChild(sourceElement);
                    videoElement.load();
                    // Use default video size for 2020 (ford: 781x439, 25% larger than 625x351)
                    var videoLeft = 90;
                    var videoTop = 150;
                    $('#localVideo').css({
                        'display': 'block',
                        'width': '781px',
                        'height': '439px',
                        'left': videoLeft + 'px',
                        'top': videoTop + 'px'
                    });
                    // Position close button above the video
                    $('#close').css({
                        'display': 'block',
                        'left': videoLeft + 'px',
                        'top': (videoTop - 30) + 'px' // 30px above the video
                    });
                    // Try to play the video
                    var playPromise = videoElement.play();
                    if (playPromise !== undefined) {
                        playPromise.catch(function(error) {
                            console.log('Video play failed:', error);
                        });
                    }
                    $('#overlay').css('display', 'block');
                    break;
                case "rw":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/rwwork.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[15].rw);
                    $('#overlay').css('display', 'block');
                    if (window.innerWidth > 959) $('.wrapper').css('height', '1185px');
                    else $('.wrapper').css('height', '');
                    break;
                case "eledonkey2020":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/work/2020posters.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[16].eledonkey2020);
                    $('#overlay').css('display', 'block');
                    break;
                case "surgeons":
                    $('#videoLightboxWrap').css('display', window.innerWidth > 959 ? 'block' : 'flex');
                    $('#videobox').css({ 'display': 'block', 'width': '750px', 'height': '421px', 'left': '105px', 'top': '150px' }).attr({ 'src': '//player.vimeo.com/video/48152700?title=0&amp;byline=0&amp;portrait=0', 'width': '750', 'height': 421, 'frameborder': 0 });
                    $('#close').css({
                        'display': 'block',
                        'left': '105px',
                        'top': '120px'
                    });
                    $('#overlay').css('display', 'block');
                    break;
                case "vaniads":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/vanitystuff2.jpg?v=2");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        displayWidth = Math.round(displayWidth * 0.7);
                        displayHeight = Math.round(displayHeight * 0.7);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[18].vaniads);
                    $('#overlay').css('display', 'block');
                    break;
                case "logod":
                    $('#lightbox').css({ 'display': 'block', 'width': 'auto', 'height': 'auto', 'left': '50%', 'top': '50px', 'transform': 'translateX(-50%)' });
                    $('#changeImg').attr("src", "");
                    $('#changeImg').css({ 'max-width': '100%', 'max-height': 'none', 'width': 'auto', 'height': 'auto', 'object-fit': 'contain' });
                    $('#changeImg').attr("src", "images/portfolio/logos2.jpg");
                    $('#changeImg').on('load', function() {
                        var nw = this.naturalWidth;
                        var nh = this.naturalHeight;
                        var displayWidth = nw > 960 ? nw * 0.7 : nw;
                        var displayHeight = nh * (displayWidth / nw);
                        var informHeight = $('#inform').outerHeight(true);
                        var closelightboxHeight = $('#closelightbox').outerHeight(true);
                        $('#changeImg').css({ 'width': displayWidth + 'px', 'height': displayHeight + 'px' });
                        $('#lightbox').css({
                            'width': displayWidth + 'px',
                            'height': (displayHeight + informHeight + closelightboxHeight + 20) + 'px',
                            'left': '50%',
                            'transform': 'translateX(-50%)'
                        });
                    });
                    $('#inform').text(info.information[19].logod);
                    $('#overlay').css('display', 'block');
                    if (window.innerWidth > 959) $('.wrapper').css('height', '1198px');
                    else $('.wrapper').css('height', '');
                    break;
            }
            $('#lightbox').on('click', function () {
                $(this).css('display', 'none');
                $('#overlay').css('display', 'none');
                $('#videoLightboxWrap').css('display', 'none');
                $('#close').css('display', 'none');
                $('#videobox').css('display', 'none').attr('src', '');
                if (window.innerWidth > 959) $('.wrapper').css('height', '1014px');
                else $('.wrapper').css('height', '');
            });

        });
        $('.imageContainer1').css('opacity', '1');
        
        // Scrambled brightness initialization effect for workimgs
        function initializeWorkimgBrightness() {
            // Check if scrambling effect has already been shown in this session
            if (sessionStorage.getItem('sessionScramblingShown')) {
                return; // Skip if already shown
            }
            
            var $workimgs = $('.workimg');
            if ($workimgs.length === 0) return;
            
            // Set transition for smooth blinking
            $workimgs.css({
                '-webkit-transition': 'filter 0.15s ease',
                '-moz-transition': 'filter 0.15s ease',
                '-ms-transition': 'filter 0.15s ease',
                '-o-transition': 'filter 0.15s ease',
                'transition': 'filter 0.15s ease'
            });
            
            // Blink effect: change brightness multiple times during 1 second
            var blinkInterval = setInterval(function() {
                $workimgs.each(function() {
                    var randomBrightness = 0.3 + Math.random() * 1.5; // Random between 0.3 and 1.8
                    $(this).css({
                        '-webkit-filter': 'brightness(' + randomBrightness + ')',
                        '-moz-filter': 'brightness(' + randomBrightness + ')',
                        '-ms-filter': 'brightness(' + randomBrightness + ')',
                        '-o-filter': 'brightness(' + randomBrightness + ')',
                        'filter': 'brightness(' + randomBrightness + ')'
                    });
                });
            }, 150); // Blink every 150ms
            
            // After 1 second, stop blinking and animate all to normal brightness (1)
            setTimeout(function() {
                clearInterval(blinkInterval);
                // Change transition to slower for final animation
                $workimgs.css({
                    '-webkit-transition': 'filter 0.8s ease',
                    '-moz-transition': 'filter 0.8s ease',
                    '-ms-transition': 'filter 0.8s ease',
                    '-o-transition': 'filter 0.8s ease',
                    'transition': 'filter 0.8s ease'
                });
                $workimgs.css({
                    '-webkit-filter': 'brightness(1)',
                    '-moz-filter': 'brightness(1)',
                    '-ms-filter': 'brightness(1)',
                    '-o-filter': 'brightness(1)',
                    'filter': 'brightness(1)'
                });
                
                // After animation completes, remove inline styles to allow CSS hover to work
                setTimeout(function() {
                    $workimgs.css({
                        '-webkit-filter': '',
                        '-moz-filter': '',
                        '-ms-filter': '',
                        '-o-filter': '',
                        'filter': '',
                        '-webkit-transition': '',
                        '-moz-transition': '',
                        '-ms-transition': '',
                        '-o-transition': '',
                        'transition': ''
                    });
                    // Mark scrambling effect as shown for this session
                    sessionStorage.setItem('sessionScramblingShown', '1');
                }, 800); // Wait for 0.8s transition to complete
            }, 1000);
        }
        
        // Initialize brightness effect after a short delay to ensure elements are visible
        setTimeout(initializeWorkimgBrightness, 100);
    </script>
</body>